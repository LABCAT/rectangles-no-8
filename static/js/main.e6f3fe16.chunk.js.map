{"version":3,"sources":["js/helpers/Globals.js","js/functions/PlayIcon.js","js/classes/AnimatedRectangle.js","audio/rectangles-no-8.ogg","audio/rectangles-no-8.mid","js/P5SketchWithAudio.js","js/App.js","index.js"],"names":["window","p5","PlayIcon","_jsxs","id","className","xmlns","height","viewBox","width","children","_jsx","d","fill","AnimatedRectangle","constructor","p","x","y","size","hue","this","dead","cellSize","colour","color","segCount","random","segs","dir","Vector","fromAngle","floor","TWO_PI","mult","pos","createVector","Math","ceil","newPos","push","updateCount","update","rotate","PI","add","unshift","length","pop","draw","stroke","i","s","e","line","noFill","P5SketchWithAudio","sketchRef","useRef","Sketch","canvas","canvasWidth","innerWidth","canvasHeight","innerHeight","audioLoaded","player","PPQ","loadMidi","Midi","fromUrl","midi","then","result","console","log","noteSet1","tracks","notes","filter","note","scheduleCueSet","noteSet2","noteSet3","noteSet4","noteSet5","document","getElementById","classList","remove","preload","song","loadSound","audio","onended","logCredits","noteSet","callbackName","poly","arguments","undefined","lastTicks","currentCue","ticks","time","addCue","gridCells","bgRect","setup","createCanvas","colorMode","HSB","rectMode","CENTER","background","strokeWeight","maxX","maxY","horizontalGrid","pattern","translateX","translateY","translate","rect","cell","executeCueSet1","forEach","executeCueSet2","emptyCells","randomCell","executeCueSet3","executeCueSet4","impactHues","currentImpactHue","executeCueSet5","durationTicks","hasStarted","mousePressed","isPlaying","pause","parseInt","currentTime","buffer","duration","reset","dataLayer","title","location","href","addClass","play","creditsLogged","stop","updateCanvasDimensions","resizeCanvas","attachEvent","addEventListener","useEffect","current","ref","App","ReactDOM","render","React","StrictMode"],"mappings":"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","file":"static/js/main.e6f3fe16.chunk.js","sourcesContent":["// p5.sound doesn't work correctly when p5 is not available in the global name space so we add it here\n// https://github.com/processing/p5.js-sound/issues/512\nimport * as p5 from \"p5\";\nwindow.p5 = p5;\n","export default function PlayIcon() {\n    return (\n        <svg id=\"play-icon\" className='fade-out' xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\">\n            <path d=\"M0 0h24v24H0z\" fill=\"none\" />\n            <path d=\"M10 16.5l6-4.5-6-4.5v9zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\" />\n        </svg>\n    )\n}\n","export default class AnimatedRectangle {\r\n    /**\r\n     * Inspiration:\r\n     * https://openprocessing.org/sketch/469866\r\n     */\r\n    constructor(p, x, y, size, hue) {\r\n        this.dead = false;\r\n        this.cellSize = 10;\r\n        this.p = p;\r\n        this.x = x;\r\n        this.y = y;\r\n        this.size = size;\r\n        this.hue = hue;\r\n        this.colour = this.p.color(hue, 100, 100, 0.5);\r\n        \r\n        this.segCount = this.p.random(2, 10);\r\n        this.segs = [];\r\n\r\n        this.dir = window.p5.Vector.fromAngle(\r\n            this.p.floor(this.p.random(4)) * (this.p.TWO_PI / 4)\r\n        ).mult(this.cellSize);\r\n\r\n        this.pos = this.p.createVector(\r\n            Math.ceil(this.p.random(this.size) / this.cellSize) * this.cellSize, \r\n            Math.ceil(this.p.random(this.size) / this.cellSize) * this.cellSize\r\n        );\r\n\r\n        this.newPos = this.p.createVector(0, 0);\r\n\r\n        this.segs.push(this.pos);\r\n\r\n        this.updateCount = 0;\r\n    }\r\n\r\n    update () {\r\n        if (Math.random() < 0.3) {\r\n\t\t\tthis.dir.rotate(Math.random() < 0.5 ? -(this.p.PI / 2) : (this.p.PI / 2));\r\n\t\t}\r\n\r\n\t\t//move\r\n\t\tthis.newPos = window.p5.Vector.add(this.pos, this.dir);\r\n\r\n\t\tthis.segs.unshift(this.newPos);\r\n\t\tthis.pos = this.newPos;\r\n\r\n\t\tif (this.segs.length > this.p.segCount) {\r\n            this.segs.pop();\r\n        }\r\n        this.updateCount++;\r\n    }\r\n\r\n    draw () {\r\n        this.p.stroke(this.colour);\r\n\t\tthis.dead = true;\r\n\r\n\t\tfor (var i = 0; i < this.segs.length - 1; i++) {\r\n\t\t\tvar s = this.segs[i];\r\n\t\t\tvar e = this.segs[i + 1];\r\n\r\n\t\t\tif (s.x >= 0 && s.x <= this.size && s.y >= 0 && s.y <= this.size) {\r\n\t\t\t\tif (e.x >= 0 && e.x <= this.size && e.y >= 0 && e.y <= this.size) {\r\n\r\n\t\t\t\t\tthis.p.line(s.x + this.x, s.y + this.y, e.x + this.x, e.y + this.y);\r\n\t\t\t\t\tthis.p.line(s.y + this.x, s.x + this.y, e.y + this.x, e.x + this.y);\r\n\r\n\t\t\t\t\tthis.p.line(this.size - s.x + this.x, s.y + this.y, this.size - e.x + this.x, e.y + this.y);\r\n\t\t\t\t\tthis.p.line(this.size - s.y + this.x, s.x + this.y, this.size - e.y + this.x, e.x + this.y);\r\n\r\n\t\t\t\t\tthis.p.line(s.x + this.x, this.size - s.y + this.y, e.x + this.x, this.size - e.y + this.y);\r\n\t\t\t\t\tthis.p.line(s.y + this.x, this.size - s.x + this.y, e.y + this.x, this.size - e.x + this.y);\r\n\r\n\t\t\t\t\tthis.p.line(this.size - s.x + this.x, this.size - s.y + this.y, this.size - e.x + this.x, this.size - e.y + this.y);\r\n\t\t\t\t\tthis.p.line(this.size - s.y + this.x, this.size - s.x + this.y, this.size - e.y + this.x, this.size - e.x + this.y);\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n        if(Math.random() < 0.95) {\r\n            this.dead = false;\r\n        }\r\n\r\n        this.p.noFill();\r\n    }\r\n}","export default __webpack_public_path__ + \"static/media/rectangles-no-8.422ad91e.ogg\";","export default __webpack_public_path__ + \"static/media/rectangles-no-8.ba50fbfe.mid\";","import React, { useRef, useEffect } from \"react\";\nimport \"./helpers/Globals\";\nimport \"p5/lib/addons/p5.sound\";\nimport * as p5 from \"p5\";\nimport { Midi } from '@tonejs/midi'\nimport PlayIcon from './functions/PlayIcon.js';\nimport AnimatedRectangle from './classes/AnimatedRectangle.js';\n\nimport audio from \"../audio/rectangles-no-8.ogg\";\nimport midi from \"../audio/rectangles-no-8.mid\";\n\n/**\n * Blobs No. 2\n */\nconst P5SketchWithAudio = () => {\n    const sketchRef = useRef();\n\n    const Sketch = p => {\n\n        p.canvas = null;\n\n        p.canvasWidth = window.innerWidth;\n\n        p.canvasHeight = window.innerHeight;\n\n        p.audioLoaded = false;\n\n        p.player = null;\n\n        p.PPQ = 3840 * 4;\n\n        p.loadMidi = () => {\n            Midi.fromUrl(midi).then(\n                function(result) {\n                    console.log(result);\n                    const noteSet1 = result.tracks[4].notes.filter(note => note.midi !== 43); // Redrum - roland tr-808 (kit01)\n                    p.scheduleCueSet(noteSet1, 'executeCueSet1');\n                    const noteSet2 = result.tracks[2].notes; // Subtrator - Raison d'etre\n                    p.scheduleCueSet(noteSet2, 'executeCueSet2');\n                    const noteSet3 = result.tracks[9].notes; // Subtrator - Vibra\n                    p.scheduleCueSet(noteSet3, 'executeCueSet3');\n                    const noteSet4 = result.tracks[5].notes; // Europa - Night Driver\n                    p.scheduleCueSet(noteSet4, 'executeCueSet4');\n                    const noteSet5 = result.tracks[6].notes; // Europa - Impact Square\n                    p.scheduleCueSet(noteSet5, 'executeCueSet5');\n                    p.audioLoaded = true;\n                    document.getElementById(\"loader\").classList.add(\"loading--complete\");\n                    document.getElementById(\"play-icon\").classList.remove(\"fade-out\");\n                }\n            );\n            \n        }\n\n        p.preload = () => {\n            p.song = p.loadSound(audio, p.loadMidi);\n            p.song.onended(p.logCredits);\n        }\n\n        p.scheduleCueSet = (noteSet, callbackName, poly = false)  => {\n            let lastTicks = -1,\n                currentCue = 1;\n            for (let i = 0; i < noteSet.length; i++) {\n                const note = noteSet[i],\n                    { ticks, time } = note;\n                if(ticks !== lastTicks || poly){\n                    note.currentCue = currentCue;\n                    p.song.addCue(time, p[callbackName], note);\n                    lastTicks = ticks;\n                    currentCue++;\n                }\n            }\n        } \n\n        p.gridCells = [];\n\n        p.bgRect = null;\n\n        p.setup = () => {\n            p.canvas = p.createCanvas(p.canvasWidth, p.canvasHeight);\n            p.colorMode(p.HSB);\n            p.rectMode(p.CENTER);\n            p.background(0, 0, 0, 0.5);\n            p.strokeWeight(3);\n            let maxX = 16;\n            let maxY = 8;\n            p.horizontalGrid = true;\n            p.cellSize = p.height / 9;\n            if(p.height > p.width) {\n                p.horizontalGrid = false; \n                p.cellSize = p.width / 9;\n                maxX = 8;\n                maxY = 16;\n            } \n\n            for (let x = 0; x < maxX; x++) {\n                for (let y = 0; y < maxY; y++) {\n                    p.gridCells.push(\n                        {\n                            x: x * p.cellSize,\n                            y: y * p.cellSize,\n                            size: p.cellSize * 0.9,\n                            pattern: undefined\n                        }\n                    )\n                }\n            }\n\n            p.translateX = (p.width - (maxX * p.cellSize)) / 2 + (p.cellSize / 2);\n            p.translateY = (p.height - (maxY * p.cellSize)) / 2 + (p.cellSize / 2);\n            p.translate(p.translateX, p.translateY);\n        }\n\n        p.draw = () => {\n            p.background(0, 0, 0);\n            p.translate(p.translateX, p.translateY);\n\n            if(p.bgRect) {\n                const { width, height, hue } = p.bgRect;\n                const x = p.width / 2 - p.translateX;\n                const y = p.height / 2 - p.translateY;\n                p.stroke(hue, 100, 100, 0);\n                p.fill(hue, 100, 100, 0.2);\n                p.rect(x, y, width, height);\n                p.fill(hue, 100, 100, 0.4);\n                p.rect(x, y, width / 2, height / 2);\n                p.fill(hue, 100, 100, 0.6);\n                p.rect(x, y, width / 4, height / 4);\n                p.bgRect.width = p.bgRect.width + p.width / 10;\n                p.bgRect.height = p.bgRect.height + p.height / 10;\n            }\n\n            p.stroke(0, 0, 0);\n\n            for (let i = 0; i < p.gridCells.length; i++) {\n                const cell = p.gridCells[i];\n                const { x, y, size, pattern } = cell;\n                if(pattern === undefined) {\n                    p.stroke(0, 0, 100);\n                    p.fill(0, 0, 100);\n                    p.rect(x, y, size, size);\n                } \n                else {\n                    p.fill(0, 0, 0);\n                    p.rect(x, y, size, size);\n                    p.stroke(pattern.hue, 100, 100);\n                    p.fill(pattern.hue, 100, 100, 0.25);\n                    p.rect(x, y, size, size);\n                    pattern.update();\n                    pattern.draw();\n                }\n            }\n            p.translate(-p.translateX, -p.translateY);\n        }\n\n        p.executeCueSet1 = (note) => {\n            const { currentCue } = note; \n            if(currentCue % 29 === 1 && currentCue < 120) {\n                p.gridCells.forEach(cell => {\n                    cell.pattern = undefined;\n                });\n            }\n        }\n\n        // Subtrator - Raison d'etre\n        p.executeCueSet2 = (note) => {\n            const emptyCells = p.gridCells.filter(cell => cell.pattern === undefined);\n            const randomCell = p.random(emptyCells);\n            randomCell.pattern = new AnimatedRectangle(\n                p,\n                randomCell.x - (randomCell.size / 2),\n                randomCell.y - (randomCell.size / 2),\n                randomCell.size,\n                0\n            );\n        }\n\n        // Subtrator - Vibra\n        p.executeCueSet3 = (note) => {\n            const emptyCells = p.gridCells.filter(cell => cell.pattern === undefined);\n            const randomCell = p.random(emptyCells);\n            randomCell.pattern = new AnimatedRectangle(\n                p,\n                randomCell.x - (randomCell.size / 2),\n                randomCell.y - (randomCell.size / 2),\n                randomCell.size,\n                210\n            );\n        }\n\n        // Europa - Night Driver\n        p.executeCueSet4 = (note) => {\n            const emptyCells = p.gridCells.filter(cell => cell.pattern === undefined);\n            const randomCell = p.random(emptyCells);\n            randomCell.pattern = new AnimatedRectangle(\n                p,\n                randomCell.x - (randomCell.size / 2),\n                randomCell.y - (randomCell.size / 2),\n                randomCell.size,\n                90\n            );\n        }\n\n        p.impactHues = [330, 30, 60, 180, 270, 300]\n\n        p.currentImpactHue = 330;\n\n        // Europa - Impact Square\n        p.executeCueSet5 = (note) => {\n            const { durationTicks, currentCue } = note;\n            if(currentCue % 12 === 0) {\n                p.currentImpactHue = p.random(p.impactHues.filter(hue => hue !== p.currentImpactHue));\n            }\n            const emptyCells = p.gridCells.filter(cell => cell.pattern === undefined);\n            const randomCell = p.random(emptyCells);\n            randomCell.pattern = new AnimatedRectangle(\n                p,\n                randomCell.x - (randomCell.size / 2),\n                randomCell.y - (randomCell.size / 2),\n                randomCell.size,\n                p.currentImpactHue\n            );\n            if(durationTicks > 19000) {\n                p.bgRect = {\n                    width: p.width / 1000,\n                    height: p.height / 1000,\n                    hue: p.currentImpactHue\n                }\n            }\n        }\n\n        p.hasStarted = false;\n\n        p.mousePressed = () => {\n            if(p.audioLoaded){\n                if (p.song.isPlaying()) {\n                    p.song.pause();\n                } else {\n                    if (parseInt(p.song.currentTime()) >= parseInt(p.song.buffer.duration)) {\n                        p.reset();\n                        if (typeof window.dataLayer !== typeof undefined){\n                            window.dataLayer.push(\n                                { \n                                    'event': 'play-animation',\n                                    'animation': {\n                                        'title': document.title,\n                                        'location': window.location.href,\n                                        'action': 'replaying'\n                                    }\n                                }\n                            );\n                        }\n                    }\n                    document.getElementById(\"play-icon\").classList.add(\"fade-out\");\n                    p.canvas.addClass(\"fade-in\");\n                    p.song.play();\n                    if (typeof window.dataLayer !== typeof undefined && !p.hasStarted){\n                        window.dataLayer.push(\n                            { \n                                'event': 'play-animation',\n                                'animation': {\n                                    'title': document.title,\n                                    'location': window.location.href,\n                                    'action': 'start playing'\n                                }\n                            }\n                        );\n                        p.hasStarted = false\n                    }\n                }\n            }\n        }\n\n        p.creditsLogged = false;\n\n        p.logCredits = () => {\n            if (\n                !p.creditsLogged &&\n                parseInt(p.song.currentTime()) >= parseInt(p.song.buffer.duration)\n            ) {\n                p.creditsLogged = true;\n                    console.log(\n                    \"Music By: http://labcat.nz/\",\n                    \"\\n\",\n                    \"Animation By: https://github.com/LABCAT/\"\n                );\n                p.song.stop();\n            }\n        };\n\n        p.reset = () => {\n\n        }\n\n        p.updateCanvasDimensions = () => {\n            p.canvasWidth = window.innerWidth;\n            p.canvasHeight = window.innerHeight;\n            p.canvas = p.resizeCanvas(p.canvasWidth, p.canvasHeight);\n        }\n\n        if (window.attachEvent) {\n            window.attachEvent(\n                'onresize',\n                function () {\n                    p.updateCanvasDimensions();\n                }\n            );\n        }\n        else if (window.addEventListener) {\n            window.addEventListener(\n                'resize',\n                function () {\n                    p.updateCanvasDimensions();\n                },\n                true\n            );\n        }\n        else {\n            //The browser does not support Javascript event binding\n        }\n    };\n\n    useEffect(() => {\n        new p5(Sketch, sketchRef.current);\n    }, []);\n\n    return (\n        <div ref={sketchRef}>\n            <PlayIcon />\n        </div>\n    );\n};\n\nexport default P5SketchWithAudio;\n","import P5SketchWithAudio from './P5SketchWithAudio'\n\nfunction App() {\n  return (\n    <P5SketchWithAudio/>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './css/build.css';\nimport App from './js/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}